import type { AppProps } from "next/app"
import { Hydrate, QueryClientProvider } from "@tanstack/react-query"
import { ReactQueryDevtools } from "@tanstack/react-query-devtools"
import Head from "next/head"
import { createGlobalStyle, ThemeProvider } from "styled-components"

import { queryClient, theme } from "@core"

import Layout from "@layout"

const GlobalStyle = createGlobalStyle`  
  html, body, #__next {
    height: 100%;
    margin: 0;
    transition: all 0.2s ease;
    background-color: ${({ theme }) => theme.background};
    font-family: ${({ theme }) => theme.font.name}, sans-serif;
  }

  * {
    outline: none;
  }
`

const App = ({ Component, pageProps }: AppProps) => {
  return (
    <>
      <Head>
        <title>Андей Субботин - Портфолио</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link
          rel="icon"
          href="https://firebasestorage.googleapis.com/v0/b/portfolio-b2b7d.appspot.com/o/favicon.png?alt=media&token=dc6c62d3-fb25-468d-969c-8f3ff805f2ae"
        />
      </Head>
      <QueryClientProvider client={queryClient}>
        <Hydrate state={pageProps.dehydratedState}>
          <ReactQueryDevtools initialIsOpen={false} />
          <ThemeProvider theme={theme}>
            <GlobalStyle />
            <Layout>
              <Component {...pageProps} />
            </Layout>
          </ThemeProvider>
        </Hydrate>
      </QueryClientProvider>
    </>
  )
}

export default App
